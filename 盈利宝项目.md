# 盈利宝项目



## 1.fastjson

**java处理json的库：**fastjson，jackson，gson

fastjson是阿里巴巴的开源JSON解析库，它可以解析JSON格式的字符串，fastjson是json 的序列化和反序列化。

**maven依赖：**

```xml
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>fastjson</artifactId>
    <scope>1.2.51</scope>
</dependency>
```

 

**json序列化：**

```java
//使用fastjson中的JSONObject实现序列化
String json = JSONObject.toJSONString(student);
System.out.println("json="+json);
```

**json反序列化：**

```java
@Test
public void test05(){
    String json ="{\"age\":20,\"id\":1001,\"name\":\"Watson\",\"school\":{\"address\":\"北京海淀\",\"name\":\"北京大学\"}}\n";
    JSONObject.parseObject(json);
    Student student = JSONObject.parseObject(json,Student.class);
    System.out.println("student="+student);
}
```





## 2.HttpClient

是什么：HttpClient是一个HTTP通信库，是一个工具包。

能做什么：RPC接口调用，爬取网页源码

怎么用：

```xml
<dependency>
  <groupId>org.apache.httpcomponents</groupId>
  <artifactId>httpclient</artifactId>
  <version>4.5.12</version>
</dependency>
```

例：通过ip地址找到访问者的地理位置

**Get请求：**

```java
@Test
public void test01() {
    //按用户访问系统时的ip，查询ip的地区信息
    //1.创建HttpClient对象 执行请求，获取返回结果
    CloseableHttpClient client = HttpClients.createDefault();

    //2.准备请求参数和url信息
    //HttpGet表示get请求
    String uri = "https://restapi.amap.com/v3/ip?key=0113a13c88697dcea6a445584d535837&ip=60.25.188.64";
    HttpGet httpGet = new HttpGet(uri);
    try {
        //3.执行get请求
        //CloseableHttpResponse是访问后的返回结果，类型HttpServletResponse
        CloseableHttpResponse response = client.execute(httpGet);
        //4.判断http status code = 200
        if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK){
            //5.读取返回的数据
            String respText = EntityUtils.toString(response.getEntity());
            System.out.println("respText="+respText);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }finally{
        //6.关闭资源
        try{
            client.close();
        }catch(Exception e){
            e.printStackTrace();
        }
    }
}
```



**Post请求：**

```java
@Test
public void testPost(){
    String url = "https://restapi.amap.com/v3/ip";
    //1.创建HttpClient对象
    CloseableHttpClient client = HttpClients.createDefault();

    //2.准备HttpPost
    HttpPost httpPost = new HttpPost(url);

    try {
        //3.准备post参数，参数名=值
        //参数集合，添加参数名和值
        List<NameValuePair> params = new ArrayList<>();
        params.add(new BasicNameValuePair("key", "3a13c88697dcea6a445584d535837"));
        params.add(new BasicNameValuePair("ip", "60.25.188.64"));
        HttpEntity entity = new UrlEncodedFormEntity(params);
        httpPost.setEntity(entity);

        //4.执行请求
        CloseableHttpResponse response = client.execute(httpPost);
        if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK){
            String resp = EntityUtils.toString(response.getEntity());
            System.out.println("resp="+resp);
        }
    }catch(Exception e){
        e.printStackTrace();
    }finally{
        //5.关闭资源
        try{
            client.close();
        }catch (Exception ex){
            ex.printStackTrace();
        }
    }
}
```







## 3.swagger

Swagger能够在线自动生成 RESTFul接口的文档，同时具备测试接口的功能。

swagger依赖：

```xml
<!--Swagger依赖-->
<dependency>
    <groupId>io.springfox</groupId>
    <artifactId>springfox-swagger2</artifactId>
    <version>3.0.0</version>
</dependency>

<!--Swagger UI-->
<dependency>
    <groupId>io.springfox</groupId>
    <artifactId>springfox-swagger-ui</artifactId>
    <version>3.0.0</version>
</dependency>
<dependency>
    <groupId>io.swagger</groupId>
    <artifactId>swagger-models</artifactId>
    <version>1.6.5</version>
</dependency>
```



**Swagger中注解列表：**

**@EnableSwagger2：**

在启动类上加入@EnableSwagger2

**@Api：**

用在类上，说明该类的作用。可以标记一个 Controller 类作为 Swagger 文档资源

例：

 ```java
 @Api(tags={"用户接口"})
 @RestController
 public class UserController {
 }
 ```

**@ApiOperation:**

用在Controller里的方法上，说明方法的作用，每一个接口的定义.

**value**属性是简短说明，**notes**是详细描述

```java
@ApiOperation(value="新增用户", notes="详细描述")
public UserDto addUser( AddUserParam param) {
}
```

**@ApiImplicitParam ，@ApiImplicitParams：**

用于方法上，为单独的请求参数进行说明。

```java
@ApiImplicitParams({
	@ApiImplicitParam(name = "id", value = "用户ID", dataType = "string", paramType = "query", required = true, defaultValue = "1") })
@GetMapping("/user")
public UserDto getUser(@RequestParam("id") String id) {
	return new UserDto();
    }

```

**@ApiResponse，@ApiResponses：**

用于方法上，说明接口响应的一些信息。

```java
@ApiResponses({ 
    @ApiResponse(code = 200, message = "OK", response = UserDto.class) })
@PostMapping("/user")
public UserDto addUser(AddUserParam  param) {
}
```

**@ApiModel，@ApiModelProperty：**

用于字段，表示对 model 属性的说明

```java
@ApiModel(value = "com.bjpowernode.AddUserParam", 
 description = "新增用户参数")
public class AddUserParam {
​    @ApiModelProperty(value = "ID")
​    private String id;
​    @ApiModelProperty(value = "名称")
​    private String name;
​    @ApiModelProperty(value = "年龄")
​    private int age;
	}
```





## 4.axios

axios是一个基于promise的HTTP库，可在浏览器和node.js中。

**特性：**

- 从浏览器中创建XMLHttpRequest对象
- 从node.js发出http请求
- 支持Promise API
- 拦截请求和响应
- 转换请求和响应数据
- 取消请求
- 自动转换JSON数据
- 客户端支持防止CSRF/XSRF







## 5.互联网金融

原先在银行中做的一些业务，一部分放在网上做，例如：转账，提现。



### 项目简介

**盈利宝项目：**

一个基于互联网的金融项目。

提供的是盈利宝的理财平台，用户可以在平台上存入一定的资金，用来购买平台的理财产品，到期后获取收益。

**分布式结构：**

主要的技术dubbo+springboot

每一个项目是一个微服务项目：把相关的功能放在一个项目中，可以独立部署，运行。

**服务：**

1.micr-web服务：处理来自vue项目的请求，调用其他的服务，完成数据和业务的处理。

2.micr-dataservice数据服务：存取数据，操作数据库的。

3.micr-task：定时任务服务，在某个时间执行某个方法，完成某个功能。

4.micr-pay：支付服务，账户的充值，提现，查询等。

**前端：**

vue项目：用户在vue项目中，执行各种业务请求。

**数据库和表：**

u_user：用户信息表---做登录，注册，实名认证

u_finance_account：资金表---用户有多少钱

b_product_info：理财信息表---记录的各种理财产品

b_bid_info：投资记录表---记录每个用户购买的理财产品的明细（订单表）

b_income_record：收益表---记录每笔投资产生的利息

b_recharge_record：充值表---记录用户在平台的充值信息







### 项目功能实现

接口：

1.平台基本信息接口 /api/v1/ylb/baseinfo  参数：没有参数   

查询的注册用户数量，收益率平均值，累计投资金额



