# 计算机网络



## 1.计算机网络体系结构



### **1.1计算机网络的概念**

计算机网络是将一个众多**分散的，自治的**计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现**资源共享**和**信息传递**的系统。



**计算机网络，互连网，互联网的区别**

**计算机网络(Computer Networking)：**由若干**结点(node)**和连接这些结点的**链路(link)**组成。

结点可以是计算机，交换机，路由器等。

链路可以是有线链路，无线链路。

<img src="./assets/image-20241017142100061.png" alt="image-20241017142100061" style="zoom: 25%;" />





**互连网(internet)：**

可以把两个或多个计算机网络互相连起来，形成规模更大的计算机网络，也可成为**"互连网"**。

<img src="./assets/image-20241017142422793.png" alt="image-20241017142422793" style="zoom: 25%;" />

**互联网(Internet)：**

ISP：Internet Service Provider，即互联网服务提供商(如中国电信/移动/联通)

<img src="./assets/image-20241017143225474.png" alt="image-20241017143225474" style="zoom: 25%;" />



互联网必须使用**TCP/IP**通信协议

互连网可以使用任意协议。



### 1.2计网的组成和功能

**组成：**

硬件：主机(端系统)，通信设备(交换机，路由器)，通信链路(光纤，网线，同轴电缆)，网络适配器(网卡)

软件

协议：由硬件，软件共同实现

 



### 1.3电路交换，报文交换，分组交换



**电路交换：**

1.建立连接 (尝试占用通信资源)

2.通信(一直占用通信资源)

3.释放连接(归还通信资源)

<img src="./assets/image-20241017152010740.png" alt="image-20241017152010740" style="zoom: 25%;" />

电路交换的优点：

专用的物理通路，在通信的全部时间内，两个用户始终占用端到端的线路资源。数据直送，**传输速率高**。

电路交换的缺点：

建立/释放连接，需要额外的时间开销。

没有差错控制。





**报文交换：**

![image-20241017153023231](./assets/image-20241017153023231.png)



报文交换的优点：

- 通信前不需要建立连接
- 通信线路可以灵活分配
- 用户无需独占整条链路，线路利用率高
- 交换结点支持差错控制



报文交换的缺点：

- 报文不定长，不方便存储转发管理 
- 长报文存储转发时间开销大，缓存开销大
- 长报文容易出错，重传代价高





**分组交换：**

<img src="./assets/image-20241017154142539.png" alt="image-20241017154142539" style="zoom: 25%;" />

分组交换的优点：

分组定长，方便存储转发管理

分组的存储转发时间开销小，缓存开销小

分组不易出错，重传代价低



分组交换的缺点：

相比报文交换，控制信息占比增加

相比电路交换，依然存在存储转发时延

报文被拆分成多个分组，传输过程中可能出现失序，丢失等问题，增加处理的复杂度



![image-20241017162653861](./assets/image-20241017162653861.png)







### 1.4计算机网络的分类



**按分布范围分类**

![image-20241017165919947](./assets/image-20241017165919947.png)

![image-20241017170545780](./assets/image-20241017170545780.png)





**按传输技术分类**

- 广播式网络
- 点对点网络





**按拓扑结构分类**

**总线型结构：**数据广播式传输，存在总线竞争问题

<img src="./assets/image-20241017171232262.png" alt="image-20241017171232262" style="zoom: 25%;" />



**星型结构：**

<img src="./assets/image-20241017172104372.png" alt="image-20241017172104372" style="zoom:25%;" />

**网状结构：**数据通过各中间结点逐一存储转发，属于点到点传输

<img src="./assets/image-20241017171635817.png" alt="image-20241017171635817" style="zoom:25%;" />

典型代表：由众多路由器构建的广域网







### 1.5计网的性能指标

- 速率，带宽，吞吐量
- 时延，时延带宽积，往返时延
- 信道利用率



#### **1.速率**

指连接到网络上的节点在信道上传输数据的速率。也称数据率和比特率，数据传输速率。

单位：bit/s,b/s或**bps**





#### **2.带宽**

某信道所能传送的**最高数据率**

单位：**bps**





#### **3.吞吐量(Throughput)**

指**单位时间**内通过某个网络的**实际数据量**。

吞吐量受带宽限制，受复杂的网络负载情况影响。

<img src="./assets/image-20241017174031314.png" alt="image-20241017174031314" style="zoom:25%;" />





#### **4.时延(Delay)**

指数据从网络的一端到另一端所需的时间。

<img src="./assets/image-20241018095209994.png" alt="image-20241018095209994" style="zoom: 50%;" />







#### **5.时延带宽积**

![image-20241018100306814](./assets/image-20241018100306814.png)





#### **6.往返时延RTT(Round Trip Time)**

![image-20241018101649335](./assets/image-20241018101649335.png)





#### **7.信道利用率**

<img src="./assets/image-20241018101959440.png" alt="image-20241018101959440" style="zoom: 25%;" />









### 1.6计网分层结构

![image-20241018104952608](./assets/image-20241018104952608.png)





#### PDU，SDU，PCI

协议数据单元(PDU)：对等层次之间传送的数据单位。

服务数据单元(SDU)：为完成上一层实体所要求的功能而传送的数据。

协议控制信息(PCI)：控制协议操作的信息。



#### OSI参考模型

**1.物理层**

<img src="./assets/image-20241018111810170.png" alt="image-20241018111810170"  />



**2.数据链路层**

![image-20241018111953123](./assets/image-20241018111953123.png)



**3.网络层**

![image-20241018112258219](./assets/image-20241018112258219.png)





**4.传输层**

![image-20241018112546510](./assets/image-20241018112546510.png)

**复用和分用：**发送端几个高层实体复用一条低层的连接，在接收端再进行分用。

其他功能：差错控制，流量控制，连接建立与释放，可靠传输管理。





**5-7.层**

<img src="./assets/image-20241018113019063.png" alt="image-20241018113019063" style="zoom: 50%;" />



**总结：各层次数据传输单位**

<img src="./assets/image-20241018113211984.png" alt="image-20241018113211984" style="zoom: 33%;" />







#### TCP/IP参考模型

![image-20241018114035510](./assets/image-20241018114035510.png)



**TCP/IP各层功能**

<img src="./assets/image-20241018114707623.png" alt="image-20241018114707623" style="zoom: 33%;" />







## 2.物理层

物理层任务：实现相邻节点之间比特的传输。



### 2.1通信基础

**信源，信宿，信号，信道**

信源：数据的发送方

信宿：数据的接收方

信号：数据

信道：信号传输的通道





**码元**

每一个信号就是一个码元(如果在一个信号周期内，只有可能出现2种信号，那么这个码元就是二进制码元)。

二进制码元：每个码元可以携带1比特的信号。

<img src="./assets/image-20241018164222028.png" alt="image-20241018164222028" style="zoom:25%;" />

如果一个周期内可能出现K种信号：
$$
1码元 = log_2Kbit
$$


**速率**

<img src="./assets/image-20241018165354852.png" alt="image-20241018165354852" style="zoom: 50%;" />





### 2.2信道的极限容量

<img src="./assets/image-20241018171427291.png" alt="image-20241018171427291" style="zoom: 33%;" />



**噪声**

对信道产生干扰，影响信道的数据传输效率。



#### **奈奎斯特定理**

![image-20241018172742900](./assets/image-20241018172742900.png)





#### 香农定理

<img src="./assets/image-20241018173245531.png" alt="image-20241018173245531" style="zoom: 50%;" />





### 2.3编码和调制



编码：二进制数据→数字信号

调制：二进制数据→模拟信号



**常用的编码方法**

![image-20241021091801770](./assets/image-20241021091801770.png)





**常用的调制方法**

<img src="./assets/image-20241021093441889.png" alt="image-20241021093441889" style="zoom: 50%;" />







### 2.4传输介质



#### 有线传输介质

##### 双绞线

<img src="./assets/image-20241021094504282.png" alt="image-20241021094504282" style="zoom:33%;" />





##### 同轴电缆

<img src="./assets/image-20241021094544158.png" alt="image-20241021094544158" style="zoom:33%;" />



##### 光纤

<img src="./assets/image-20241021094810937.png" alt="image-20241021094810937" style="zoom: 33%;" />



#### 无限传输介质

<img src="./assets/image-20241021095524833.png" alt="image-20241021095524833" style="zoom: 33%;" />







### 2.5物理层设备



#### **中继器(Reapeater)**

<img src="./assets/image-20241021144652910.png" alt="image-20241021144652910" style="zoom:33%;" />





#### 集线器(Hub)

<img src="./assets/image-20241021144850422.png" alt="image-20241021144850422" style="zoom:33%;" />

**冲突域：**如果两台主机同时发送数据会导致"冲突"，则这两台机器处于同一个"冲突域"。

处于同一冲突域的主机在发送数据前需要进行"信道争用"。









## 3.数据链路层



**数据链路层**使用**物理层**提供的比特传输服务

**数据链路层**为**网络层**提供服务，将网络层的**IP数据报(分组)**封装成帧，传输给下一个相邻结点。

![image-20241021151937034](./assets/image-20241021151937034.png)





### **3.1数据链路层的功能**

#### **1.封装成帧**

**帧定界：**如何让接收方能够确定帧的界限

**透明传输：**接收方链路层要能从收到的帧恢复原始SDU，让网络层"感受不到"将分组封装成帧的过程



#### 2.差错控制

发现并解决一个帧内部的位错(丢弃/纠错)



#### 3.可靠传输

发现并解决帧错：

<img src="./assets/image-20241021152903934.png" alt="image-20241021152903934" style="zoom:50%;" />



#### 4.流量控制

控制发送方发送帧的速率不要太快，使接收方来得及接收



#### 5.介质访问控制

**广播信道**需要实现此功能：逻辑上是总线型的拓扑，多个结点需争抢传输介质的使用权

**点对点通信**通常不需要实现此功能，点对点信道通常意味着两个结点之间有专属的传输介质，不用争抢







### 3.2封装成帧

<img src="./assets/image-20241021153903981.png" alt="image-20241021153903981" style="zoom: 50%;" />



**1.字符计数法**

<img src="./assets/image-20241021154516126.png" alt="image-20241021154516126" style="zoom: 50%;" />



**2.字节填充法**

加帧头(SOH)和帧尾(EOT)

<img src="./assets/image-20241021154620115.png" alt="image-20241021154620115" style="zoom:50%;" />



**3.零比特填充法**

**发送方**需要对帧的数据部分进行**处理**，每当遇到连续的5个1，就填充一个0

**接收方**需要对帧的数据部分进行**逆处理**，每当遇到5个1，就删除后面的0

<img src="./assets/image-20241021160834441.png" alt="image-20241021160834441" style="zoom: 50%;" />



**4.违规编码法**

<img src="./assets/image-20241021161159733.png" alt="image-20241021161159733" style="zoom:50%;" />







### 3.3差错控制



#### 奇偶校验码

奇校验码：整个校验码(有效信息+校验位)中"1"的个数为奇数。

偶校验码：整个校验码(有效信息+校验位)中"1"的个数为偶数。

<img src="./assets/image-20241021164327265.png" alt="image-20241021164327265" style="zoom:50%;" />

硬件实现原理：异或运算

奇偶校验仅能检测出奇数位错误，无纠错能力





#### 循环冗余(CRC)校验

思想：

数据发送，接受方约定一个"除数"。

**K个信息位+R个校验位**作为**被除数**，添加校验位后需保证除法的余数为0。

收到数据后，进行除法检查余数是否为0。

<img src="./assets/image-20241021172637166.png" alt="image-20241021172637166" style="zoom:67%;" />







#### 海明码

海明码设计思路：将信息分组进行偶校验，多个校验位。





### 3.4流量控制&可靠传输

**较高的发送速度**和**较低的接收能力**不匹配，会造成传输出错(接收方缓存不够)，因此流量控制也是数据链路层的一项重要工作。

数据链路层的流量控制是点对点的。

数据链路层流量控制手段：接收方收不到则不回复确认。





#### 滑动窗口机制

<img src="./assets/image-20241031180748742.png" alt="image-20241031180748742" style="zoom: 25%;" />

<img src="./assets/image-20241031180833790.png" alt="image-20241031180833790" style="zoom:25%;" />





#### 停止等待协议

![image-20241031181802514](./assets/image-20241031181802514.png)













